<!DOCTYPE html>
<html lang="en">
<head>
	<title>TDD</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../shower/themes/ribbon/styles/styles.css">
	<style>
        .shower {
            --slide-ratio: calc(16 / 10);
        }
		.slide-code {
			padding-top: 1em;
		}
		.shout .emoji {
			font-size: 0.7em;
		}
		.large {
			line-height: 1.5;
			font-size: 50px;
		}		/* Strike */

		.strike {
			position: relative;
			text-decoration: none;
		}

		.strike span {
			position: absolute;
			top: 0.7em;
			left: -0.1em;
			right: -0.1em;
			height: 0.05em;
			background: #cc0000;
			content: '';
			transform: rotate(-2deg);
		}

	</style>
</head>
<body class="shower list">
	<section class="slide">
		<h2 class="shout">TDD</h2>
	</section>
	
	<section class="slide">
		<h2>–ú–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç (Unit test) </h2>
		<mark>–ú–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã —Å–∏—Å—Ç–µ–º—ã.</mark> –ß–∞—â–µ –≤—Å–µ–≥–æ —ç—Ç–æ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—Ö–æ—Ç—è —è –¥–æ–ø—É—Å–∫–∞—é –∏ –≤–µ—Å—å –∫–ª–∞—Å—Å). –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π –µ–¥–∏–Ω–∏—Ü—ã –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ó–∞–≥–ª—É—à–µ–∫ (Stubs, Dummies) –∏ –ú–∞–∫–µ—Ç–æ–≤ (Mockups).
	</section>

	<section class="slide">
		<h2>–°–∏—Å—Ç–µ–º–Ω—ã–π —Ç–µ—Å—Ç (System test)</h2>
		–≠—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–≤—è–∑–∫—É —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç, –≥–¥–µ –º–æ–¥—É–ª—å‚Ää‚Äî‚Ää—ç—Ç–æ —Å–≤—è–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –°–≤—è–∑–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –Ω–µ–∫–∏–º —Ñ–∞—Å–∞–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π API –∫ –Ω–µ–π. –ú–µ—Ç–æ–¥—ã —ç—Ç–æ–≥–æ API‚Ää‚Äî‚Ää—ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Ç–æ, —á—Ç–æ –Ω–∞–º –∏ –Ω–∞–¥–æ –ø–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏. –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–≤—è–∑–∫–∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –ø–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º –ó–∞–≥–ª—É—à–µ–∫ (Stubs, Dummies) –∏ –ú–∞–∫–µ—Ç–æ–≤ (Mockups). <mark>–§–∞–∫—Ç —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö –®–ø–∏–æ–Ω–æ–≤ (Spies).ü§†</mark>
	</section>

	<section class="slide clear white">
		<img class="cover width" src="pictures/test-pyramid.png">
	</section>

	<section class="slide">
		<ol class="large place" style="white-space: nowrap">
			<li><del class="strike">–ò—Å–ø–æ–ª—å–∑—É—é—Ç —Å–µ—Ç—å, –ë–î, –§–° 
					<span class="next active"></span></del></li>
			<li class="next">–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏</li>
			<li class="next">–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ</li>
			<li class="next">–ë—ã—Å—Ç—Ä—ã–µ</li>
			
		</ol>
	</section>

	<section class="slide clear white">
		<img class="cover height" src="pictures/what-to-test.png">
	</section>

	<section class="slide clear">
		<h2 class="shout">
			–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
			<span class="emoji">üõ†</span>
		</h2>
	</section>
	
	<section class="slide">
		<ol class="large place" style="white-space: nowrap">
			<li>Assert - —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</li>
			<li class="next">Spy - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—ã–∑–æ–≤—ã</li>
			<li class="next">Stub - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á—Ç–æ-–ª–∏–±–æ</li>
			<li class="next">Mock - –≤—Å–µ –∏ —Å—Ä–∞–∑—É üî•</li>
			<li class="next">–ü–æ–¥–º–µ–Ω–∞ –º–æ–¥—É–ª–µ–π –≤ runtime üî•üí£üí•</li>
		</ol>
	</section>

	<section class="slide">
		<ol class="large place" style="white-space: nowrap">
			<li>Assert - —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</li>
			<li>Spy - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—ã–∑–æ–≤—ã</li>
			<li><del class="strike">Stub - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á—Ç–æ-–ª–∏–±–æ<span></span></del></li>
			<li><del class="strike">Mock - –≤—Å–µ –∏ —Å—Ä–∞–∑—É üî•<span></span></del></li>
			<li><del class="strike">–ü–æ–¥–º–µ–Ω–∞ –º–æ–¥—É–ª–µ–π –≤ runtime üî•üí£üí•<span></span></del></li>
		</ol>
	</section>

	<section class="slide clear">
		<h2 class="shout">
			–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥
		</h2>
	</section>

	<section class="slide">
		<ol class="place" style="white-space: nowrap">
			<li>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –∫–∞–∫—É—é-–ª–∏–±–æ —Ä–∞–±–æ—Ç—É</li>
			<li class="next">–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã —Å–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</li>
			<li class="next"><a href="https://refactoring.guru/ru/refactoring/smells">...–ó–∞–ø–∞—Ö–∏ –∫–æ–¥–∞</a></li>
		</ol>
	</section>

	<section class="slide">
		<h2 class="shout">Express.js <span class="emoji">üßê</span></h2>
	</section>

	<section class="slide slide-code">
		<h2>–û–±—ã—á–Ω—ã–π —Ä–æ—É—Ç–µ—Ä</h2>
		<pre style="font-size: 0.8em">
			<code>const express = require("express");</code>
			<code><mark>dbHelper = require("dbHelper");</mark> //üí©</code>
			<code> </code>
			<code>const router = express.router();</code>
			<code> </code>
			<code>router.get("/:id", (req, res, next) => {</code>
			<code>	return dbHelper.anyTable.getById(req.params.id)</code>
			<code>	  .then(obj => res.json(obj))</code>
			<code>	  .catch(() => {...});</code>
			<code>});</code>
			<code> </code>
			<code>module.exports = router;</code>	
		</pre>	
	</section>

	<section class="slide slide-code">
		<h2>–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π —Ä–æ—É—Ç–µ—Ä</h2>
		<pre style="font-size: 0.8em">
			<code>const express = require("express");</code>
			<code>module.exports = (app, <mark>dbHelper</mark>üëç) => {</code>
			<code>	const router = express.Router();</code>
			<code> </code>
			<code>	app.use("/", router);</code>
			<code> </code>
			<code>	router.get("/:id", (req, res, next) => {</code>
			<code>	  return dbHelper.anyTable.getById(req.params.id)</code>
			<code>		.then(obj => res.json(obj))</code>
			<code>		.catch(() => {...});</code>
			<code>	});</code>
			<code>};</code>
		</pre>	
	</section>

	<section class="slide slide-code">
		<h2>Unit test –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞</h2>
		<pre style="font-size: 0.7em">
			<code>const request = require("<a href="https://github.com/visionmedia/supertest">supertest</a>");</code>
			<code>const app = require("express")();</code>
			<code><mark>const dbHelperMock = {...mocks};</mark></code>
			<code>require("routes/index")(app, <mark>dbHelperMock</mark>);</code>
			<code>describe("app", () => {</code>
			<code>	it("works", done => {</code>
			<code>	  request(app).get("/1")</code>
			<code>		.expect(200, done);</code>
			<code>	});</code>
			<code> </code>
			<code>	it("fails", done => {</code>
			<code>	  request(app).get("/2")</code>
			<code>		.expect(404, done);</code>
			<code>	});</code>
			<code>});</code>
		</pre>
	</section>

	<section class="slide clear white">
		<img class="cover" src="pictures/patterns.png">
	</section>
	
	<section class="slide">
		<h2>üìñ</h2>
		<ol>
			<li><a href="https://oz.by/books/more10616493.html">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ö–µ–Ω—Ç –ë–µ–∫</a></li>
			<li><a href="https://medium.com/@arturbasak/a04cab35f45b">–¢–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–µ–Ω –ø–∏—Å–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</a></li>
			<li><a href="https://semaphoreci.com/community/tutorials/best-practices-for-spies-stubs-and-mocks-in-sinon-js">Best Practices for Spies, Stubs and Mocks in Sinon.js</a></li>
			<li><a href="http://evanshortiss.com/development/javascript/2016/04/15/express-testing-using-ioc.html">Unit Testing Express Routers</a></li>
			<li><a href="https://habrahabr.ru/post/329740/">Mock–∞–Ω—å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö</a></li>
			<li><a href="https://testing.googleblog.com/2008/07/how-to-think-about-new-operator-with.html">How to Think About the "new" Operator with Respect to Unit Testing</a></li>
		</ol>
	</section>

	<section class="slide">
		<h2>üéûÔ∏è</h2>
		<ol>
			<li><a href="https://www.youtube.com/watch?v=9zpG_hJsrL8">Dependency Rejection and TDD without Mocks</a></li>
			<li><a href="https://youtu.be/-JGGw4SN6NA">–ö–∞–∫ –≤—Å—ë –ø–æ—á–∏–Ω–∏—Ç—å –∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞—Ç—å: —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ª–æ–∂–Ω—ã–º –∫–æ–¥–æ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç–µ—Å—Ç–æ–≤</a></li>
		</ol>
	</section>

	<div class="progress"></div>

	<script src="../shower/shower.min.js"></script>
	<!-- Copyright ¬© 2017 Yours Truly, Famous Inc. -->

</body>
</html>
